import{b as I,u as L,a as z,e as O,r as b,j as s}from"./index-CcgtVwKo.js";const m={fullName:"",address:"",city:"",country:"",postalCode:"",phone:""},P={shipping:{...m},billing:{...m},sameAsShipping:!0,addressName:""};function U(){const A=I(),{getLocalizedText:l,getLocalizedPath:y}=L();z();const{setShippingAddress:N,setBillingAddress:j,savedAddresses:f,saveAddress:S,updateAddress:v,deleteAddress:$,useAddress:w}=O(),[c,p]=b.useState(!0),[g,u]=b.useState(null),[d,x]=b.useState(!0),[t,r]=b.useState({shipping:{...m},billing:{...m},sameAsShipping:!0,addressName:""}),F=e=>{if(!c)return;const{name:n,value:a}=e.target;r(i=>({...i,shipping:{...i.shipping,[n]:a},billing:d?{...i.shipping,[n]:a}:i.billing}))},B=e=>{if(!c)return;const{name:n,value:a}=e.target;r(i=>({...i,billing:{...i.billing,[n]:a}}))},k=e=>{const n=e.target.checked;x(n),r(n?a=>({...a,billing:{...a.shipping},sameAsShipping:!0}):a=>({...a,billing:{...m},sameAsShipping:!1}))},q=e=>{if(e.preventDefault(),c){if(g)v(g,t.addressName,t.shipping,d?t.shipping:t.billing,d),N(t.shipping),j(d?t.shipping:t.billing);else if(t.addressName.trim()){const n=S(t.addressName.trim(),t.shipping,d?t.shipping:t.billing,d);u(n.id),N(t.shipping),j(d?t.shipping:t.billing)}p(!1)}else{const n=f.find(a=>a.id===g);n&&(N(n.shipping),j(n.sameAsShipping?n.shipping:n.billing),A(y("/payment")))}},E=e=>{u(e.id),p(!1),w(e),x(e.sameAsShipping),r({shipping:{...e.shipping},billing:e.sameAsShipping?{...e.shipping}:{...e.billing},addressName:e.name,sameAsShipping:e.sameAsShipping})},D=e=>{p(!0),u(e.id),x(e.sameAsShipping),r({shipping:{...e.shipping},billing:e.sameAsShipping?{...e.shipping}:{...e.billing},addressName:e.name,sameAsShipping:e.sameAsShipping})},T=()=>{p(!0),u(null),x(!0),r(P)},h="w-full p-2 border rounded focus:outline-none focus:border-[#C8B6A6] transition-colors",o="block text-gray-700 mb-1",C=e=>{const n=t[e],a=e==="shipping"?F:B,i=!c;return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:`${e}.fullName`,className:o,children:l("shipment.fullName")}),s.jsx("input",{type:"text",id:`${e}.fullName`,name:"fullName",value:n.fullName,onChange:a,className:`${h} ${i?"bg-gray-50 cursor-not-allowed":""}`,required:!0,readOnly:i,disabled:i})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:`${e}.address`,className:o,children:l("shipment.address")}),s.jsx("input",{type:"text",id:`${e}.address`,name:"address",value:n.address,onChange:a,className:`${h} ${i?"bg-gray-50 cursor-not-allowed":""}`,required:!0,readOnly:i,disabled:i})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:`${e}.city`,className:o,children:l("shipment.city")}),s.jsx("input",{type:"text",id:`${e}.city`,name:"city",value:n.city,onChange:a,className:`${h} ${i?"bg-gray-50 cursor-not-allowed":""}`,required:!0,readOnly:i,disabled:i})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:`${e}.postalCode`,className:o,children:l("shipment.postalCode")}),s.jsx("input",{type:"text",id:`${e}.postalCode`,name:"postalCode",value:n.postalCode,onChange:a,className:`${h} ${i?"bg-gray-50 cursor-not-allowed":""}`,required:!0,readOnly:i,disabled:i})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:`${e}.country`,className:o,children:l("shipment.country")}),s.jsx("input",{type:"text",id:`${e}.country`,name:"country",value:n.country,onChange:a,className:`${h} ${i?"bg-gray-50 cursor-not-allowed":""}`,required:!0,readOnly:i,disabled:i})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:`${e}.phone`,className:o,children:l("shipment.phone")}),s.jsx("input",{type:"text",id:`${e}.phone`,name:"phone",value:n.phone,onChange:a,className:`${h} ${i?"bg-gray-50 cursor-not-allowed":""}`,required:!0,readOnly:i,disabled:i})]})]})]})};return s.jsx("div",{className:"container mx-auto p-4",children:s.jsxs("div",{className:"lg:grid lg:grid-cols-12 lg:gap-8",children:[s.jsxs("div",{className:"lg:col-span-4 mb-8 lg:mb-0",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-bold",children:l("shipment.savedAddresses")}),s.jsx("button",{onClick:T,className:"text-sm bg-[#C8B6A6] text-white px-4 py-2 rounded hover:bg-[#A4907C]",children:l("shipment.addNewAddress")})]}),f.length===0?s.jsx("p",{className:"text-gray-500",children:l("shipment.noSavedAddresses")}):s.jsx("div",{className:"space-y-4",children:f.map(e=>s.jsxs("div",{className:`border rounded-lg p-4 ${g===e.id?"border-[#C8B6A6] bg-[#F9F5F2]":""}`,children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("h3",{className:"font-medium",children:e.name}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>D(e),className:"text-sm text-[#C8B6A6] hover:text-[#A4907C]",children:l("shipment.editAddress")}),s.jsx("button",{onClick:()=>E(e),className:"text-sm text-[#C8B6A6] hover:text-[#A4907C]",children:l("shipment.useThisAddress")}),s.jsx("button",{onClick:()=>$(e.id),className:"text-sm text-red-500 hover:text-red-600",children:l("shipment.deleteAddress")})]})]}),s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsx("p",{children:e.fullName}),s.jsx("p",{children:e.address}),s.jsxs("p",{children:[e.city,", ",e.postalCode]}),s.jsx("p",{children:e.country}),s.jsx("p",{children:e.phone})]})]},e.id))})]}),s.jsx("div",{className:"lg:col-span-8",children:s.jsxs("form",{onSubmit:q,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold mb-6",children:l(c?"shipment.title":"shipment.selectedAddress")}),C("shipping"),c&&s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{htmlFor:"addressName",className:o,children:l("shipment.addressName")}),s.jsx("input",{type:"text",id:"addressName",name:"addressName",value:t.addressName,onChange:e=>r(n=>({...n,addressName:e.target.value})),className:h})]})]}),s.jsx("div",{className:"border-t pt-6",children:s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:d,onChange:k,className:"rounded border-gray-300 text-[#C8B6A6] focus:ring-[#C8B6A6]"}),s.jsx("span",{children:l("shipment.sameAsShipping")})]})}),!d&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold mb-6",children:l("shipment.billingTitle")}),C("billing")]}),s.jsx("button",{type:"submit",className:"w-full bg-[#C8B6A6] text-white py-3 rounded hover:bg-[#A4907C] transition-colors",children:l(c?"shipment.saveChanges":"shipment.proceedToPayment")})]})})]})})}export{U as default};
